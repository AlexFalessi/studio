<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Jasmine Spec Runner</title>

    <link rel="shortcut icon" type="image/png" href="lib/jasmine-1.3.0/jasmine_favicon.png">
    <link rel="stylesheet" type="text/css" href="../js/prettydiff/diffview.css">
    <link rel="stylesheet" type="text/css" href="lib/jasmine-1.3.0/jasmine.css">

    <script type="text/javascript" src="lib/jasmine-1.3.0/jasmine.js"></script>
    <script type="text/javascript" src="lib/jasmine-1.3.0/jasmine-html.js"></script>

  <!-- include source files here... -->
    <script src="../js/jquery-1.9.0.js"></script>
    <script src="../js/jquery-ui-1.9.2-min.js"></script>
    <script src="../js/jquery.ui.touch-punch.min.js"></script>
    <script src="../js/jquery.mousewheel.js"></script>
    <script type='text/javascript' src='../js/jquery.jsPlumb-1.5.0.js'></script>
    <script type='text/javascript' src='../js/bootstrap.js'></script>

    <script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
    <script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shBrushXml.js"></script>
    <script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>

    <script src="../js/vkbeautify.0.99.00.beta.js"></script>

    <script src="../js/underscore-min.js"></script>
    <script src="../js/backbone.js"></script>
    <script src="../js/backbone-forms/backbone-forms.js"></script>
    <script src="../js/backbone-forms/editors/list.js"></script>
    <script src="../js/backbone-forms/adapters/backbone.bootstrap-modal.js"></script>
    <script src="../js/xml2json.js"></script>
    <script src="../js/dagre.min.js"></script>
    <script src="../js/prettydiff/prettydiff.js"></script>

    <script src="../js/proactive/model.js"></script>
    <script src="../js/proactive/view.js"></script>
    <script src="../js/proactive/scheduler-client.js"></script>
    <script src="../js/proactive/studio.js"></script>

    <script type="text/javascript">
        var pathArr = location.pathname.split( '/' );
        var path = '';
        for (var i=0; i<pathArr.length-2; i++) {
            path += pathArr[i] + '/';
        }
        var httpServer = location.protocol + "//" + location.host + path;//"http://localhost:8000/";
     </script>

    <!-- include spec files here... -->
    <script type="text/javascript" src="spec/ImportExport.js"></script>

    <script type="text/javascript">

        $( document ).ready(function() {
            var jasmineEnv = jasmine.getEnv();
            jasmineEnv.updateInterval = 1000;

            // adding templates needed for job generation to the html dom
            var indexHtml =  $.ajax({
                type: "GET",
                url: httpServer+"/index.html",
                cache: false,
                async: false
            }).responseText;

            var div = $("<div style='display:none'></div>");
            div.append(indexHtml)
            $('body').append(div);

            var htmlReporter = new jasmine.HtmlReporter();
            jasmineEnv.addReporter(htmlReporter);

            jasmineEnv.specFilter = function(spec) {
                return htmlReporter.specFilter(spec);
            };

            var currentWindowOnload = window.onload;

            window.onload = function() {
                if (currentWindowOnload) {
                    currentWindowOnload();
                }

                console.log("Launching tests")
                execJasmine();
            };

            function execJasmine() {
                jasmineEnv.execute();
            }
        });
    </script>

</head>

<body>
<div id="palette-container"></div>
<div id="workflow-designer"></div>
<div id="properties-container"></div>
<div id="workflow-xml-container"></div>
</body>
</html>
