<?xml version="1.0" encoding="UTF-8"?>
<job
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="urn:proactive:jobdescriptor:3.7"
     xsi:schemaLocation="urn:proactive:jobdescriptor:3.7 http://www.activeeon.com/public_content/schemas/proactive/jobdescriptor/3.7/schedulerjob.xsd"
    name="SubmitJob" 
    priority="normal"
    onTaskError="continueJobExecution"
     maxNumberOfExecution="2">
  <taskFlow>
    <task name="SubmitJob">
      <description>
        <![CDATA[ The simplest task, ran by a groovy engine. ]]>
      </description>
      <variables>
        <variable name="workflowURL" value="https://trydev.activeeon.com/workflow-catalog/buckets/1/workflows/4?alt=xml" inherited="false" model="String"/>
        <variable name="waitUntilJobFinished" value="false" inherited="false" model="Boolean"/>
      </variables>
      <scriptExecutable>
        <script>
          <code language="groovy">
            <![CDATA[
//Please add the job URL that you want to execute in Task Variables under the key 'workflowURL'
//If you want to wait until the execution of the job please change the key 'waitUntilJobFinished' to true

// connect to the scheduler
schedulerapi.connect()

// get the job URL from Task Variables
jobURL = new URL(variables.get("workflowURL"))

// submitting the job
jobid = schedulerapi.submit(jobURL)

// block job
if(variables.get("waitUntilJobFinished")){
  schedulerapi.waitForJob(jobid, 120000)
}
]]>
          </code>
        </script>
      </scriptExecutable>
    </task>
  </taskFlow>
</job>